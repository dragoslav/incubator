!function(e,t){"use strict";e.fn.CircularSlider=function(n){var i=this;if(0!==i.find("div.jcs-panel").length)throw"Already Created!!!";var a=function(e,t){e.jcsIndicator.width()&&e.jcsIndicator.height()||e.jcsIndicator.css({width:t/5+"px",height:t/5+"px"})},r={Circle:{drawShape:function(e,t){var n=2*t,i=n+"px",a=e.jcs,r=e.jcsValue,o=e.jcsPanel;a.css({width:i,height:i,"border-radius":i});var d=n+t/10;o.css({"border-width":t/10+"px","border-radius":d+"px"});var l=a.outerWidth()-a.innerWidth()+(r.outerWidth()-r.innerWidth()),u=s.innerCircleRatio*t,h=t-u-l/2;r.css({width:2*u+"px",height:2*u+"px","font-size":u/2+"px",top:h+"px",left:h+"px"})},getCenter:function(e,t){return{x:e.left+t,y:e.top+t,r:t}},deg2Val:function(e){if(0>e||e>359)throw"Invalid angle "+e;return e=(e+90)%360,Math.round(e*(l/360))+s.min},val2Deg:function(e){if(e<s.min||e>s.max)throw"Invalid range "+e;var t=e-s.min;return(Math.round(t*(360/l))-90)%360}},"Half Circle":{drawShape:function(e,t){var n=2*t,i=e.jcs,a=e.jcsValue,r=e.jcsPanel;i.css({width:n+"px",height:t+"px","border-radius":n+"px "+n+"px 0 0","border-bottom":"none"});var o=n+t/10;r.css({"border-width":t/10+"px","border-radius":o+"px "+o+"px 0 0","border-bottom":"none"});var d=i.outerWidth()-i.innerWidth()+(a.outerWidth()-a.innerWidth()),l=s.innerCircleRatio*t,u=t-l-d/2;a.css({width:2*l+"px",height:2*l+"px","font-size":l/2+"px",top:u+"px",left:u+"px"})},getCenter:function(e,t){return{x:e.left+t,y:e.top+t,r:t}},deg2Val:function(e){if(0>e||e>359)throw"Invalid angle "+e;return e=(e+180)%360,Math.round(e*(l/180))+s.min},val2Deg:function(e){if(e<s.min||e>s.max)throw"Invalid range "+e;var t=e-s.min;return(Math.round(t*(180/l))-180)%360}},"Half Circle Left":{drawShape:function(e,t){var n=2*t,i=e.jcs,a=e.jcsValue,r=e.jcsPanel;i.css({height:n+"px",width:t+"px","border-radius":n+"px 0 0 "+n+"px","border-right":"none"});var o=n+t/10;r.css({"border-width":t/10+"px","border-radius":o+"px 0 0"+o+"px","border-right":"none"});var d=i.outerWidth()-i.innerWidth()+(a.outerWidth()-a.innerWidth()),l=s.innerCircleRatio*t,u=t-l-d/2;a.css({width:2*l+"px",height:2*l+"px","font-size":l/2+"px",top:u+"px",left:u+"px"})},getCenter:function(e,t){return{x:e.left+2*t,y:e.top+2*t,r:2*t}},deg2Val:function(e){if(0>e||e>359)throw"Invalid angle "+e;return e=(e-90)%360,Math.round(e*(l/180))+s.min},val2Deg:function(e){if(e<s.min||e>s.max)throw"Invalid range "+e;var t=e-s.min;return(Math.round(t*(180/l))+90)%360}},"Half Circle Right":{drawShape:function(e,t){var n=2*t,i=e.jcs,a=e.jcsValue,r=e.jcsPanel;i.css({height:n+"px",width:t+"px","border-radius":"0 "+n+"px "+n+"px 0","border-left":"none"});var o=n+t/10;r.css({"border-width":t/10+"px","border-radius":"0 "+o+"px"+o+"px 0","border-left":"none"});var d=i.outerWidth()-i.innerWidth()+(a.outerWidth()-a.innerWidth()),l=s.innerCircleRatio*t,u=t-l-d/2;a.css({width:2*l+"px",height:2*l+"px","font-size":l/2+"px",top:u+"px",left:-u+"px"})},getCenter:function(e,t){return{x:e.left,y:e.top+2*t,r:2*t}},deg2Val:function(e){if(0>e||e>359)throw"Invalid angle "+e;return e=(e+90)%360,Math.round(e*(l/180))+s.min},val2Deg:function(e){if(e<s.min||e>s.max)throw"Invalid range "+e;var t=e-s.min;return(Math.round(t*(180/l))-90)%360}},"Half Circle Bottom":{drawShape:function(e,t){var n=2*t,i=e.jcs,a=e.jcsValue,r=e.jcsPanel;i.css({width:n+"px",height:t+"px","border-radius":"0 0 "+n+"px "+n+"px","border-top":"none"});var o=n+t/10;r.css({"border-width":t/10+"px","border-radius":"0 0 "+o+"px "+o+"px","border-top":"none"});var d=i.outerWidth()-i.innerWidth()+(a.outerWidth()-a.innerWidth()),l=s.innerCircleRatio*t,u=t-l-d/2;a.css({width:2*l+"px",height:2*l+"px","font-size":l/2+"px",top:-u+"px",left:u+"px"})},getCenter:function(e,t){return{x:e.left+t,y:e.top,r:t}},deg2Val:function(e){if(0>e||e>359)throw"Invalid angle "+e;return Math.round(e*(l/180))+s.min},val2Deg:function(e){if(e<s.min||e>s.max)throw"Invalid range "+e;var t=e-s.min;return Math.round(t*(180/l))}}},o={radius:75,innerCircleRatio:"0.5",handleDist:100,min:0,max:359,value:0,clockwise:!0,labelSuffix:"",labelPrefix:"",shape:"Circle",touch:!0,animate:!0,animateDuration:360,selectable:!1,slide:function(){},formLabel:t},s=e.extend({},o,n),d=function(){if((0|s.min)!==s.min)throw"Invalid min value : "+s.min;if((0|s.max)!==s.max)throw"Invalid max value : "+s.max;if((0|s.value)!==s.value)throw"Invalid initial value : "+s.value;if(s.max<s.min)throw"Invalid range : "+s.max+"<"+s.min;if(s.value<s.min&&(s.value=s.min),s.value>s.max&&(s.value=s.max),s.labelSuffix||(s.labelSuffix=o.labelSuffix),s.labelPrefix||(s.labelPrefix=o.labelPrefix),s.formLabel&&!e.isFunction(s.formLabel)&&(s.formLabel=o.formLabel),s.shape||(s.shape=o.shape),!r[s.shape])throw"Invalid shape : "+s.shape;if(!s.innerCircleRatio||s.innerCircleRatio<.1||s.innerCircleRatio>.9)throw"Invalid innerCircleRatio. Expected: between 0.1 and 0.9, Found: "+s.innerCircleRatio;if(s.animate&&((0|s.animateDuration)!==s.animateDuration||s.animateDuration<0))throw"Invalid animate duration(in ms) : "+s.animateDuration;((0|s.handleDist)!==s.handleDist||s.handleDist<=0||s.handleDist>100)&&(s.handleDist=o.handleDist)};d();var l=s.max-s.min+1,u=e('<div class="jcs-panel"><div class="jcs"><span class="jcs-value"></span></div><div class="jcs-indicator"> </div></div>');u.appendTo(i);var h=Math.abs(parseInt(s.radius))||o.radius,c=u.find("div.jcs"),f=u.find("div.jcs-indicator"),p=u.find("span.jcs-value"),v={jcs:c,jcsPanel:u,jcsIndicator:f,jcsValue:p};r[s.shape].drawShape(v,h),a(v,h);var x=c.position(),m=c.outerWidth()-c.innerWidth(),g=f.outerWidth()-f.innerWidth(),w=(c.width()+m)/2,b=(f.width()+g)/2,I=r[s.shape].getCenter(x,w),j=!1,y=!1,C=function(e){var t={x:e.offsetX||e.originalEvent.layerX,y:e.offsetY||e.originalEvent.layerY},n=t.x-I.x,i=t.y-I.y,a=Math.atan2(i,n),o=180*a/Math.PI,d=parseInt(0>o?360+o:o)%360,l=(I.x+I.r*Math.cos(a)-b,I.y+I.r*Math.sin(a)-b,(r[s.shape].val2Deg(s.value)+360)%360);if(l!==d){var u=Math.min((d+360-l)%360,(l+360-d)%360);u||(u=180);var h=(d+360-l)%360===u,c=s.animateDuration/u,f=4,p=1;c>=4?f=parseInt(c):p=c>=1?4*parseInt(c):4/c;var v=l,x=parseInt(u/p);y=!0;var m=function(){v+=h?p:-p,v=(v+360)%360,--x<=0&&(clearInterval(g),y=!1,v=d),P(r[s.shape].deg2Val(v))},g=window.setInterval(m,f)}},M=function(t){if(t.stopPropagation(),j&&!y){var n={x:t.offsetX||t.originalEvent.layerX,y:t.offsetY||t.originalEvent.layerY},a=n.x-I.x,o=n.y-I.y,d=Math.atan2(o,a),l=180*d/Math.PI,u=parseInt(0>l?360+l:l)%360,h=I.x+I.r*s.handleDist/100*Math.cos(d)-b,c=I.y+I.r*s.handleDist/100*Math.sin(d)-b;f.css({top:c+"px",left:h+"px"});var v=r[s.shape].deg2Val(u),x=s.clockwise?v:s.max-v;x<s.min?x=s.min:x>s.max&&(x=s.max),p.html(W(x)),s.slide&&e.isFunction(s.slide)&&s.slide(i,x)}};c.on("mousedown",function(e){j=!0,e.stopPropagation()}),c.on("mouseup",function(e){j=!1,e.stopPropagation()}),c.on("mousemove",M),c.on("click",function(e){e.stopPropagation();var t={x:e.offsetX||e.originalEvent.layerX,y:e.offsetY||e.originalEvent.layerY},n=t.x-I.x,i=t.y-I.y,a=Math.sqrt(n*n+i*i);(m>=h-a||a>h)&&(s.animate?C(e):(j=!0,M(e))),j=!1}),u.on("click",function(e){c.trigger(e)}),u.on("mouseup",function(e){c.trigger(e)}),u.on("mousemove",function(e){c.trigger(e)}),u.on("mousedown",function(e){c.trigger(e)});var W=function(e){return s.value=e,s.formLabel?s.formLabel(e,s.labelPrefix,s.labelSuffix):s.labelPrefix+e+s.labelSuffix},D=function(){r[s.shape].drawShape(v,h),v.jcsIndicator.css({width:h/5+"px",height:h/5+"px"}),x=c.position(),m=c.outerWidth()-c.innerWidth(),g=f.outerWidth()-f.innerWidth(),w=(c.width()+m)/2,b=(f.width()+g)/2,I=r[s.shape].getCenter(x,w),P(s.value||s.min)},P=function(t){if((0|t)!==t)throw"Invalid input (expected integer) : "+t;var n=s.clockwise?t:s.max-t,a=r[s.shape].val2Deg(n),o=a*Math.PI/180,d=I.x+I.r*s.handleDist/100*Math.cos(o)-b,l=I.y+I.r*s.handleDist/100*Math.sin(o)-b;f.css("top",l+"px"),f.css("left",d+"px"),p.html(W(t)),s.slide&&e.isFunction(s.slide)&&s.slide(i,n)},S=function(){return s.value},E=function(e){s.radius=Math.abs(parseInt(e)),h=s.radius,D()},R=function(){return s.radius},V=function(){return Object.keys()},L=function(e,t){if((0|e)!==e)throw"Invalid min value : "+e;if((0|t)!==t)throw"Invalid max value : "+t;if(e>t)throw"Min range should be less than max";s.min=e,s.max=t,l=s.max-s.min+1;var n=s.value;(e>n||n>t)&&(n=e),P(n)},X="",Y=function(t){var n=t.changedTouches;if(!(n.length>1)){var i=n[0],a=e(i.target);if(a.hasClass("jcs")){var r=a.offset(),o=a.width(),s=a.height(),d=i.clientX,l=i.clientY;if(!(d<r.left||d>o+r.left||l<r.top||l>s+r.top)){var u=["touchstart","touchmove","touchend"],h=["mousedown","mousemove","mouseup"],c=u.indexOf(t.type);if(-1!==c){var f=h[c];t.type===u[2]&&X===u[0]&&(f="click");var p=document.createEvent("MouseEvent");p.initMouseEvent(f,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),i.target.dispatchEvent(p),t.preventDefault(),X=t.type}}}}};return s.touch&&(document.addEventListener("touchstart",Y,!0),document.addEventListener("touchmove",Y,!0),document.addEventListener("touchend",Y,!0),document.addEventListener("touchcancel",Y,!0)),s.selectable||u.addClass("noselect"),P(s.value||s.min),e.extend({},this,{setValue:P,getValue:S,getSupportedShapes:V,setRadius:E,getRadius:R,setRange:L})}}(jQuery);